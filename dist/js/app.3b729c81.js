(function(t){function e(e){for(var i,o,a=e[0],c=e[1],u=e[2],l=0,f=[];l<a.length;l++)o=a[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);h&&h(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},r={app:0},s=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var h=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1116:function(t,e,n){"use strict";n("c9d0")},2579:function(t,e,n){t.exports=n.p+"img/fu3.61759a3f.png"},"4a03":function(t,e,n){t.exports=n.p+"img/fu2.eb2bff69.png"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("hello-world")],1)},s=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hello"},[i("div",{staticClass:"left"},t._l(t.imgArr,(function(e,n){return i("div",{key:n,staticClass:"item"},[i("img",{attrs:{src:e.url,alt:""}}),i("div",{staticClass:"btn",on:{click:function(e){return t.changeCurrent(n)}}},[t._v(t._s(e.name))])])})),0),i("div",{staticClass:"mid",on:{mousemove:function(e){return t.move(e)}}},t._l(t.imgArr,(function(e,n){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.current===n,expression:"current === index"}],key:n,staticClass:"content"},[i("canvas",{ref:"canvas"+n,refInFor:!0,staticClass:"origin",style:{width:t.canvasWidth+"px",height:t.canvasHeight+"px"},attrs:{width:t.canvasWidth,height:t.canvasHeight}}),i("div",{staticClass:"border",style:{width:t.penWidth+"px",height:t.penWidth+"px",top:t.borderY+"px",left:t.borderX+"px",borderRadius:t.erasering?"0":"50%"}}),i("canvas",{ref:"canvas_"+n,refInFor:!0,style:{width:t.canvasWidth+"px",height:t.canvasHeight+"px"},attrs:{width:t.canvasWidth,height:t.canvasHeight},on:{mousedown:function(e){return t.mousedown(e)},mousemove:function(e){return t.mousemove(e)}}})])})),0),i("div",{staticClass:"right"},[i("button",{staticClass:"eraser",on:{click:t.eraser}},[t._v(t._s(t.erasering?"PEN":"ERASER"))]),i("button",{staticClass:"clear",on:{click:t.clear}},[t._v("CLEAR ALL")]),i("button",{on:{click:t.getScore}},[t._v("CLICK ME GOT SCORE")]),i("div",[t._v("YOUR SCORE IS "),i("span",{staticClass:"red"},[t._v(t._s(t.score))])]),i("div",{staticClass:"pen-color"},[t._v("LINE COLOR "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"color"}],ref:"color",attrs:{type:"color",name:"color"},domProps:{value:t.color},on:{input:function(e){e.target.composing||(t.color=e.target.value)}}})]),i("div",{staticClass:"pen-width"},[t._v(" BRUSH SIZE "),i("div",{staticClass:"xi",on:{click:t.xi}},[t._v("-")]),t._v(" "+t._s(t.penWidth)+" "),i("div",{staticClass:"cu",on:{click:t.cu}},[t._v("＋")])]),i("div",{staticClass:"save",on:{click:t.save}},[i("img",{attrs:{src:n("a4fa"),alt:""}}),i("span",[t._v("CLICK ME TO SAVE")])])])])},a=[],c=(n("4de4"),n("d3b7"),n("b0c0"),n("efbb")),u=n.n(c),h=n("4a03"),l=n.n(h),f=n("2579"),d=n.n(f),v=n("73b3"),p=n.n(v),g={name:"HelloWorld",data:function(){return{isDown:!1,lock:!0,x:0,y:0,score:0,canvasWidth:200,canvasHeight:200,ctx:null,ctx2:null,erasering:!1,penWidth:8,color:"#ff0000",imgArr:[{url:u.a,name:"TRVAL SAFE"},{url:l.a,name:"HOUSE PROTECTION"},{url:d.a,name:"PROMOTION OPPORTUNITY"},{url:p.a,name:"GOOD FORTUNE"}],current:0,borderX:0,borderY:0}},mounted:function(){var t=this;document.addEventListener("mouseup",this.mouseup);for(var e=function(e){var n=t.$refs["canvas"+e][0],i=t.$refs["canvas_"+e][0];t["canvas_"+e]=i;var r=n.getContext("2d"),s=i.getContext("2d");t["ctx"+e]=r,t["ctx_"+e]=s;var o=new Image;o.onload=function(){t.$refs["canvas"+e][0].width=o.width,t.$refs["canvas"+e][0].height=o.height,t.canvasWidth=o.width,t.canvasHeight=o.height,t.$refs["canvas"+e][0].clientWidth,setTimeout((function(){t["ctx"+e].drawImage(o,0,0,o.width,o.height)}),10)},o.src=t.imgArr[e].url},n=0;n<this.imgArr.length;n++)e(n)},beforeDestroy:function(){document.removeEventListener("mouseup",this.mouseup)},methods:{mousedown:function(t){this.isDown=!0,this.x=t.offsetX,this.y=t.offsetY},mousemove:function(t){var e=this;if(this.erasering){if(!this.isDown)return;this["ctx_"+this.current].clearRect(this.x-this.penWidth/2,this.y-this.penWidth/2,this.penWidth,this.penWidth)}else{if(!this.isDown)return;if(!this.lock)return;this.lock=!1,setTimeout((function(){e.lock=!0}),5),this["ctx_"+this.current].beginPath(),this["ctx_"+this.current].lineWidth=this.penWidth,this["ctx_"+this.current].strokeStyle=this.color,this["ctx_"+this.current].lineCap="round",this["ctx_"+this.current].moveTo(this.x,this.y),this["ctx_"+this.current].lineTo(t.offsetX,t.offsetY),this["ctx_"+this.current].stroke()}this.x=t.offsetX,this.y=t.offsetY},mouseup:function(){this.isDown=!1},move:function(t){"border"!=t.target.classList[0]&&("CANVAS"===t.target.nodeName?(this.borderX=t.offsetX+246.5,this.borderY=t.offsetY+50):(this.borderX=t.offsetX,this.borderY=t.offsetY))},getScore:function(){var t=this,e=this.toRgbArr(this["ctx"+this.current].getImageData(0,0,this.canvasWidth,this.canvasHeight).data),n=this.toRgbArr(this["ctx_"+this.current].getImageData(0,0,this.canvasWidth,this.canvasHeight).data),i=0,r=e.filter((function(t){return 0!==t[3]}));console.log("原图中有"+r.length+"个像素带颜色");var s=n.filter((function(t){return 0!==t[3]}));console.log("画稿中有"+s.length+"个像素带颜色");for(var o=0;o<n.length;o++)this.isRight(e[o],n[o])&&i++;var a=n.filter((function(n,i){return!t.isWhite(n)||!t.isWhite(e[i])})).length||1,c=parseInt(100*i/a);this.score=1.2*c>100?100:parseInt(1.2*c),console.log("画正确的像素有"+i),console.log("两幅画中共有"+a+"个像素带颜色")},toRgbArr:function(t){for(var e=[],n=0;n<t.length;n+=4)e.push([t[n],t[n+1],t[n+2],t[n+3]]);return e},isRight:function(t,e){return 0!==t[3]&&0!==e[3]},isWhite:function(t){return 0===t[3]},clear:function(){this["ctx_"+this.current].clearRect(0,0,this.canvasWidth,this.canvasHeight)},eraser:function(){this.erasering=!this.erasering},changeCurrent:function(t){this.current=t},save:function(){var t=this["canvas_"+this.current].toDataURL(),e=document.createElement("a");e.href=t,e.download=this.imgArr[this.current].name+".png",e.click()},xi:function(){this.penWidth--,1===this.penWidth&&(this.penWidth=1)},cu:function(){this.penWidth++}}},m=g,b=(n("1116"),n("2877")),x=Object(b["a"])(m,o,a,!1,null,"24fb8486",null),_=x.exports,w={name:"app",components:{HelloWorld:_}},C=w,O=(n("034f"),Object(b["a"])(C,r,s,!1,null,null,null)),y=O.exports,W=n("1f94"),R=n.n(W);i["a"].use(R.a),i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(y)}}).$mount("#app")},"73b3":function(t,e,n){t.exports=n.p+"img/fu4.6d2cee6c.png"},"85ec":function(t,e,n){},a4fa:function(t,e,n){t.exports=n.p+"img/save.e3f90a6b.png"},c9d0:function(t,e,n){},efbb:function(t,e,n){t.exports=n.p+"img/fu1.0e27b118.png"}});
//# sourceMappingURL=app.3b729c81.js.map